<umb-load-indicator ng-if="$ctrl.state.isLoading"></umb-load-indicator>

<div class="form-horizontal">
    <div style="display:flex; justify-content:space-between">
        <umb-box style="width: 50%; margin-right: 14px;">
            <div class="umb-box-header">
                1. Audit information
            </div>
            <div class="umb-box-content">
                <div class="control-group umb-control-group">
                    <div class="umb-el-wrap">
                        <div class="control-header">
                            <label for="name" class="control-label">Name</label>
                        </div>
                        <div class="controls">
                            <input type="text" class="umb-textstring" id="name" style="width: 100%;" ng-model="$ctrl.state.selectedAudit.name" />
                        </div>
                    </div>
                </div>
                <div class="control-group umb-control-group">
                    <div class="umb-el-wrap" style="padding-top: 10px">
                        <div class="control-header">
                            <label for="starting-node" class="control-label">Starting node</label>
                        </div>
                        <div class="controls">
                            <a id="starting-node" ng-if="$ctrl.state.selectedAudit.selectedNode == null" ng-click="$ctrl.fn.openNodeDialog()">Select starting node</a>
                            <a ng-if="$ctrl.state.selectedAudit.selectedNode != null" ng-click="$ctrl.fn.openNodeDialog()">{{$ctrl.state.selectedAudit.selectedNode.name}}</a>
                        </div>
                    </div>
                </div>
                <div class="control-group umb-control-group">
                    <div class="umb-el-wrap" style="padding-top: 10px">
                        <div class="control-header">
                            <label for="starting-node" class="control-label">Max pages to crawl</label>
                            <small class="control-description">The max pages to crawl. Leave empty for no maximum</small>
                        </div>
                        <div class="controls">
                            <input type="number" class="umb-number" id="name" style="width: 100%;" ng-model="$ctrl.state.selectedAudit.maxPagesToCrawl" />
                        </div>
                    </div>
                </div>
                <div class="control-group umb-control-group">
                    <div class="umb-el-wrap" style="padding-top: 10px">
                        <div class="control-header">
                            <label for="starting-node" class="control-label">Minimum delay between requests</label>
                            <small class="control-description">Minimum delay to use between requests.</small>
                        </div>
                        <div class="controls">
                            <input type="number" class="umb-number" id="name" style="width: 100%;" ng-model="$ctrl.state.selectedAudit.delayBetweenRequests" />
                        </div>
                    </div>
                </div>
            </div>
        </umb-box>
        <umb-box style="width: 50%">
            <div class="umb-box-header">
                2. Checks
            </div>
            <div class="umb-box-content">
                <div class="control-group umb-control-group">
                    <div class="umb-el-wrap" ng-repeat="check in $ctrl.state.checks">
                        <div class="control-header" style="padding-top: 0;">
                            <div class="control-label">{{check.Name}}</div>
                            <small class="control-description">{{check.Description}}</small>
                        </div>
                        <div class="controls">
                            <umb-toggle class="umb-permission__toggle"
                                        checked="$ctrl.state.selectedAudit.checks.includes(check.Id)"
                                        on-click="$ctrl.fn.toggleCheck(check)">
                            </umb-toggle>
                        </div>
                    </div>
                </div>
            </div>
        </umb-box>
    </div>
    <div>
        <umb-button type="button" style="float:right;" button-style="success btn-sm" size="xs" label-key="CreateAndStart" action="$ctrl.fn.createAudit(true)">Create and start</umb-button>
        <umb-button type="button" style="float: right;" button-style="success btn-sm" size="xs" label-key="Create" action="$ctrl.fn.createAudit(false)">Create</umb-button>
        <umb-button type="button" style="float: right;" button-style="primary btn-sm" size="xs" label-key="Cancel" action="$ctrl.fn.cancel()">Cancel</umb-button>
    </div>
</div>